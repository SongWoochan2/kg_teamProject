<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mybatis.boardMapper">
	
	<insert id="productboardWrite" parameterType="productboardDTO">
		INSERT INTO product 
		VALUES(product_seq.nextval, #{product_name},#{product_cost},#{product_type},#{product_photo_addr})
	</insert>

	<delete id="productboardDelete" parameterType="int">
		DELETE FROM product WHERE product_code = #{product_code}
	</delete>
	
	<delete id="productboardModify" parameterType="productboardDTO">
		UPDATE product SET product_name=#{product_name},product_cost=#{product_cost},product_type=#{product_type},product_photo_addr=#{product_photo_addr}
		WHERE product_code=#{product_code}
	</delete>
	
	<select id="productboardView" parameterType="int" resultType="productboardDTO">
		SELECT * FROM product WHERE product_code = #{product_code}
	</select>

	<select id="productboardList" parameterType="java.util.Map"	resultType="productboardDTO">
		<![CDATA[select product_code, product_name, product_cost, product_type, product_photo_addr 
				 from  (select rownum rn, tt.* 
				 from (select * from product order by product_code desc) tt)   
				 where rn>=#{startNum} and rn<=#{endNum}]]>
	</select>

	<select id="getTotalA" resultType="int">
		select count(*) from product
	</select>


<!-- Store -->
	<select id="typeList" parameterType="java.lang.String"	resultType="productboardDTO">
			select * from product 
			where product_type=#{type} order by product_code desc
	</select>
	
	<select id="productView" parameterType="int" resultType="productboardDTO">
		SELECT * FROM product WHERE product_code = #{product_code}
	</select>
	
<!-- Pay -->
	<insert id="productpayComplete" parameterType="productPayDTO">
		INSERT INTO product_pay (
		product_pay_code, pay_id, product_code, buy_phone, gift_phone1, gift_phone2, gift_phone3, pay_type, pay_time, pay_cancle_able, order_num1, order_num2, order_num3
		)
		VALUES(pay_seq.nextval, #{pay_id},#{product_code},#{buy_phone},#{gift_phone1},#{gift_phone2},#{gift_phone3},#{pay_type}, sysdate,#{pay_cancle_able},#{order_num1},#{order_num2},#{order_num3})
	</insert>
</mapper>







