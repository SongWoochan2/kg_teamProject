<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="movieMapper">

	<insert id="movieInsert" parameterType="movieDTO">
		INSERT INTO movie
		VALUES(movie_seq.nextval,#{movie_name},#{movie_content},#{make_nation},#{movie_open_date},#{movie_recycle_time},#{movie_show_grade_name},#{movie_type1},#{movie_type2},#{movie_type3},
		#{movie_director},0,0,#{appear_actor},0,0)
	</insert>
	<update id="movieModify" parameterType="movieDTO">
		update movie set movie_name=#{movie_name}, movie_content=#{movie_content}, make_nation=#{make_nation},movie_director=#{movie_director},movie_open_date=#{movie_open_date},
		movie_recycle_time=#{movie_recycle_time},movie_show_grade_name=#{movie_show_grade_name},movie_type1=#{movie_type1},movie_type2=#{movie_type2},movie_type3=#{movie_type3},appear_actor=#{appear_actor}
		 where movie_code = #{movie_code}
	</update>
	<select id="getTotalA" resultType="int">
		select count(*) from movie
	</select>
	<select id = "movieList" parameterType="java.util.Map" resultType="movieDTO">
		<![CDATA[select movie_code, movie_name, movie_director, movie_show_grade_name, movie_recycle_time,
				to_char(movie_open_date, 'YYYY.MM.DD') as movie_open_date from 
				(select rownum rn, tt.* from 
				(select * from movie order by movie_code desc) tt) 
				 where rn>=#{startNum} and rn<=#{endNum}]]>
	</select>
	<delete id="movieDelete" parameterType="movieDTO">
		delete from movie where movie_code = #{movie_code}
	</delete>
	<select id = "movieView" parameterType="int" resultType="movieDTO">
		select * from movie where movie_code = #{movie_code}
		select * from movie where movie_code = #{movie_code} and movie_code in(
		select * from movie 
		<where>
			fafas
		</where>
		)
		
	</select>
	
	<select id = "searchByName" parameterType="java.lang.String" resultType="movieDTO">
		select * from movie where movie_name like '%'|| #{movie_name} || '%'
	</select>
	
</mapper>
